{% extends "base/base.html" %}

{% block title %}The Physics Behind ZyRace: Matter.js & Car Tuning Mechanics{% endblock %}
{% block description %}
Dive deep into the technical side of ZyRace. Learn how we use Matter.js to simulate realistic car physics,
suspension, and terrain interactions in the browser.
{% endblock %}

{% block extra_css %}
<style>
    .blog-post {
        background: var(--white);
        padding: 3rem;
        border-radius: 15px;
        box-shadow: var(--light-shadow);
        max-width: 800px;
        margin: 0 auto;
    }

    .blog-meta {
        color: var(--light-text);
        font-size: 0.9rem;
        margin-bottom: 2rem;
        border-bottom: 1px solid #eee;
        padding-bottom: 1rem;
    }

    .blog-content h2 {
        color: var(--primary);
        margin-top: 2rem;
    }

    .blog-content p {
        margin-bottom: 1.5rem;
        line-height: 1.8;
        font-size: 1.1rem;
    }

    .blog-content code {
        padding: 0.3rem 0.5rem;
        background: #f5f5f5;
        border-radius: 5px;
        display: inline-block;
        font-size: 0.95rem;
        margin: 1rem 0;
    }
</style>
{% endblock %}

{% block content %}
<section>
    <div class="blog-post">

        <div class="blog-meta">
            <span><i class="fas fa-user"></i> Ajmal U K</span>&nbsp; | &nbsp;
            <span><i class="fas fa-calendar"></i> November 2025</span>&nbsp; | &nbsp;
            <span><i class="fas fa-tag"></i> Engineering</span>
        </div>

        <div class="blog-content">

            <p>Creating a <strong>free browser car racing game</strong> that feels responsive and realistic is a massive
                engineering challenge. Unlike native apps that have direct access to hardware, web games must run
                efficiently
                within the browser's JavaScript engine.</p>

            <p>In this post, we explore how <strong>ZyRace</strong> leverages
                <a href="https://brm.io/matter-js/" target="_blank" rel="noopener">Matter.js</a>
                to deliver console-quality physics simulation at 60 FPS.
            </p>

            <h2>Why We Chose Matter.js for Rigid Body Dynamics</h2>

            <p>We needed a library that could handle complex <strong>rigid body dynamics</strong> without bloat.
                Matter.js
                was the perfect choice due to:</p>

            <ul>
                <li><strong>Stability:</strong> Robust iterative solver with minimal tunneling.</li>
                <li><strong>Extensibility:</strong> Plugin-based architecture.</li>
                <li><strong>Performance:</strong> Optimized broad-phase using spatial grids.</li>
            </ul>

            <h2>The Architecture of a ZyRace Car</h2>

            <p>A car in ZyRace is not just a sprite — it's a sophisticated <strong>compound physics body</strong>
                composed of
                multiple rigid elements connected using constraints.</p>

            <h3>1. The Chassis</h3>

            <p>The chassis is a polygon body with reduced density to prevent flipping:</p>

            <code>
const chassis = Bodies.polygon(x, y, 8, 30, { density: 0.04 });
            </code>

            <h3>2. Suspension System</h3>

            <p>We use <strong>elastic constraints</strong> to create a spring–mass–damper system:</p>
            <ul>
                <li><strong>Stiffness:</strong> Higher = stiffer ride for flat tracks.</li>
                <li><strong>Damping:</strong> Controls rebound after jumps.</li>
            </ul>

            <h3>3. High-Friction Wheels</h3>

            <p>Traction changes dynamically by adjusting wheel friction on different terrains:</p>

            <code>friction = 0.2 // ice</code>
            <code>friction = 0.9 // asphalt</code>

            <h2>Solving the "Tunneling" Problem</h2>

            <p>High-speed objects can clip through walls. We solved this using:</p>

            <ol>
                <li><strong>Sub-stepping:</strong> Physics runs at a higher frequency than rendering.</li>
                <li><strong>Raycasting:</strong> Detect collisions before movement updates.</li>
            </ol>

            <h2>Optimizing for Mobile</h2>

            <ul>
                <li><strong>Object Pooling:</strong> Avoids garbage collection spikes.</li>
                <li><strong>Off-Screen Pruning:</strong> Removes bodies that fall out of bounds.</li>
                <li><strong>Layered Canvas Rendering:</strong> Minimizes full repaints.</li>
            </ul>

            <h2>Conclusion</h2>

            <p>Every drift, crash, and hill-climb in ZyRace is powered by thousands of calculations per second.
                Matter.js proves that the <strong>open web</strong> can deliver high-fidelity physics simulations
                without native engines.</p>

        </div>

        <div style="margin-top: 3rem; text-align: center;">
            <a href="/blog" class="btn btn-secondary">← Back to Blog</a>
        </div>

    </div>
</section>
{% endblock %}

{% block schemas %}
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Mastering 2D Physics with Matter.js: A Deep Dive into ZyRace",
    "description": "Explore how ZyRace uses Matter.js to simulate realistic car physics in the browser.",
    "image": "https://zyrace.com/static/img/blog/physics-engine.jpg",
    "author": { "@type": "Person", "name": "Ajmal U K" },
    "publisher": {
        "@type": "Organization",
        "name": "UTHAKKAN",
        "logo": { "@type": "ImageObject", "url": "https://zyrace.com/favicon-96x96.png" }
    },
    "datePublished": "2025-11-15",
    "dateModified": "2025-12-07"
}
</script>

<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
        { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://zyrace.com/" },
        { "@type": "ListItem", "position": 2, "name": "Blog", "item": "https://zyrace.com/blog" },
        { "@type": "ListItem", "position": 3, "name": "Physics Engine", "item": "https://zyrace.com/blog/physics-behind-zyrace" }
    ]
}
</script>
{% endblock %}

{% block scripts %}
<script>
    const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
            }
        });
    }, { threshold: 0.1 });

    document.querySelectorAll('section').forEach(section => observer.observe(section));
</script>
{% endblock %}